{
  "manifest_version": 3,
  "name": "ShortStopper",
  "version": "1.3.1",
  "description": "Block short-form video (Shorts/Reels/TikTok) with per-channel modes, whitelist mode, and local stats.",
  "action": {
    "default_title": "ShortStopper",
    "default_popup": "adapters/chrome/popup/popup.html"
  },
  "options_page": "adapters/chrome/options/options.html",
  "permissions": [
    "storage",
    "declarativeNetRequest"
  ],
  "optional_permissions": [
    "declarativeNetRequestFeedback"
  ],
  "optional_host_permissions": [
    "*://*.doubleclick.net/*",
    "*://*.googlesyndication.com/*",
    "*://*.googleadservices.com/*",
    "*://adservice.google.com/*",
    "*://*.googletagmanager.com/*",
    "*://*.googletagservices.com/*",
    "*://*.google-analytics.com/*",
    "*://analytics.google.com/*",
    "*://*.analytics.google.com/*",
    "*://*.adsrvr.org/*",
    "*://*.adnxs.com/*",
    "*://*.rubiconproject.com/*",
    "*://*.openx.net/*",
    "*://*.criteo.com/*",
    "*://*.criteo.net/*",
    "*://*.taboola.com/*",
    "*://*.outbrain.com/*",
    "*://*.scorecardresearch.com/*",
    "*://*.quantserve.com/*",
    "*://*.hotjar.com/*",
    "*://*.fullstory.com/*",
    "*://*.sentry.io/*",
    "*://*.newrelic.com/*",
    "*://facebook.com/tr/*",
    "*://*.facebook.com/tr/*",
    "*://connect.facebook.net/*",
    "*://bat.bing.com/*",
    "*://*.bat.bing.com/*",
    "*://*.segment.com/*",
    "*://*.segment.io/*",
    "*://*.mixpanel.com/*",
    "*://*.optimizely.com/*",
    "*://*.amazon-adsystem.com/*",
    "*://*.moatads.com/*",
    "*://*.pubmatic.com/*",
    "*://*.casalemedia.com/*",
    "*://*.indexww.com/*",
    "*://*.bidswitch.net/*",
    "*://*.33across.com/*",
    "*://*.sharethrough.com/*",
    "*://*.advertising.com/*"
  ],
  "host_permissions": [
    "https://www.youtube.com/*",
    "https://m.youtube.com/*",
    "https://youtube.com/*",
    "https://www.instagram.com/*",
    "https://m.instagram.com/*",
    "https://instagram.com/*",
    "https://www.facebook.com/*",
    "https://m.facebook.com/*",
    "https://facebook.com/*",
    "https://www.tiktok.com/*",
    "https://m.tiktok.com/*",
    "https://tiktok.com/*",
    "https://www.snapchat.com/*",
    "https://m.snapchat.com/*",
    "https://snapchat.com/*",
    "https://www.pinterest.com/*",
    "https://m.pinterest.com/*",
    "https://pinterest.com/*"
  ],
  "background": {
    "service_worker": "adapters/chrome/service_worker.js",
    "type": "module"
  },
  "content_security_policy": {
    "extension_pages": "script-src 'self'; object-src 'self'; base-uri 'self';"
  },
  "declarative_net_request": {
    "rule_resources": [
      {
        "id": "shorts_redirect",
        "enabled": true,
        "path": "rules/shorts_redirect.json"
      },
      {
        "id": "basic_block",
        "enabled": false,
        "path": "rules/basic_block.json"
      },
      {
        "id": "cosmetic_block",
        "enabled": false,
        "path": "rules/cosmetic_block.json"
      }
    ]
  },
  "web_accessible_resources": [
    {
      "resources": [
        "adapters/chrome/content_module.js",
        "adapters/chrome/storage.js",
        "storage/settings.js",
        "storage/stats.js",
        "runtime/channel.js",
        "runtime/navigation.js",
        "runtime/route_cache.js",
        "runtime/session_state.js",
        "runtime/debug.js",
        "policy/decision.js",
        "policy/route_policy.js",
        "policy/shortform.js",
        "policy/shorts.js",
        "policy/settings_policy.js",
        "ui/page_visibility.js",
        "ui/root_flags.js",
        "platform/chrome.js",
        "platform/messages.js"
      ],
      "matches": [
        "https://www.youtube.com/*",
        "https://m.youtube.com/*",
        "https://youtube.com/*",
        "https://www.instagram.com/*",
        "https://m.instagram.com/*",
        "https://instagram.com/*",
        "https://www.facebook.com/*",
        "https://m.facebook.com/*",
        "https://facebook.com/*",
        "https://www.tiktok.com/*",
        "https://m.tiktok.com/*",
        "https://tiktok.com/*",
        "https://www.snapchat.com/*",
        "https://m.snapchat.com/*",
        "https://snapchat.com/*",
        "https://www.pinterest.com/*",
        "https://m.pinterest.com/*",
        "https://pinterest.com/*"
      ],
      "use_dynamic_url": true
    }
  ],
  "content_scripts": [
    {
      "matches": [
        "https://www.youtube.com/*",
        "https://m.youtube.com/*",
        "https://youtube.com/*",
        "https://www.instagram.com/*",
        "https://m.instagram.com/*",
        "https://instagram.com/*",
        "https://www.facebook.com/*",
        "https://m.facebook.com/*",
        "https://facebook.com/*",
        "https://www.tiktok.com/*",
        "https://m.tiktok.com/*",
        "https://tiktok.com/*",
        "https://www.snapchat.com/*",
        "https://m.snapchat.com/*",
        "https://snapchat.com/*",
        "https://www.pinterest.com/*",
        "https://m.pinterest.com/*",
        "https://pinterest.com/*"
      ],
      "run_at": "document_start",
      "css": [
        "adapters/chrome/no_shorts.css"
      ],
      "js": [
        "adapters/chrome/content.js"
      ]
    }
  ],
  "icons": {
    "16": "assets/icon16.png",
    "48": "assets/icon48.png",
    "128": "assets/icon128.png"
  }
}
