<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0b1220" />
  <title>ShortStopper (iOS)</title>
  <style>
    :root{
      color-scheme: light dark;
      --bg: Canvas;
      --fg: CanvasText;
      --muted: color-mix(in oklab, var(--fg) 60%, var(--bg));
      --card: color-mix(in oklab, var(--bg) 94%, var(--fg));
      --border: color-mix(in oklab, var(--fg) 18%, var(--bg));
      --accent: oklch(70% 0.16 250);
      font: 15px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    body{ margin:0; background:var(--bg); color:var(--fg); }
    .wrap{ max-width: 860px; margin: 0 auto; padding: 22px 16px 40px; }
    header{ display:flex; justify-content:space-between; align-items:baseline; gap: 12px; }
    h1{ margin:0; font-size: 22px; }
    .muted{ color: var(--muted); }
    .grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 12px; margin-top: 12px; }
    .card{ border:1px solid var(--border); background: var(--card); border-radius: 16px; padding: 14px; }
    .row{ display:flex; align-items:center; justify-content:space-between; padding: 10px 10px; border-radius: 12px; }
    .row:hover{ background: color-mix(in oklab, var(--card) 70%, var(--bg)); }
    input[type="checkbox"]{ accent-color: var(--accent); }
    a{ color: inherit; text-decoration-color: color-mix(in oklab, var(--fg) 35%, transparent); }
    a:hover{ text-decoration-color: var(--accent); }
    .btn{ display:inline-flex; align-items:center; justify-content:center; padding:.6rem .9rem; border-radius: 999px; border:1px solid var(--border); background: var(--card); }
    .note{ margin-top: 8px; }
    code{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12px; }
  </style>
</head>
<body>
  <main class="wrap">
    <header>
      <h1>ShortStopper (iOS)</h1>
      <a class="btn" href="https://www.youtube.com/">Open YouTube</a>
    </header>

    <p class="muted">
      iOS Safari canâ€™t do Chrome-style extension redirects. This iOS build is hide-only. Use the Safari content blocker for hiding, and optionally run the bridge script for stats.
    </p>

    <section class="grid">
      <div class="card">
        <div class="row"><span>Enabled</span><input id="enabled" type="checkbox" /></div>
        <div class="row"><span>Allowlist mode (YouTube only)</span><input id="whitelistMode" type="checkbox" /></div>
        <div class="row"><span>Redirect Shorts (degrades to hide)</span><input id="redirectShorts" type="checkbox" /></div>
        <div class="note muted" id="status"></div>
      </div>

      <div class="card">
        <div><strong>Today</strong></div>
        <div class="muted"><span id="todayTotal">0</span> blocked</div>
        <div class="note">
          <button class="btn" id="resetToday" type="button">Reset today</button>
        </div>
      </div>

      <div class="card">
        <div><strong>Install</strong></div>
        <div class="muted note">
          <div>1) Add this PWA to Home Screen.</div>
          <div>2) Install the Safari content blocker rules in <code>adapters/ios/blocker/blocker.json</code>.</div>
          <div>3) Optional: run <code>adapters/ios/bridge.js</code> as a userscript/bookmarklet to get stats.</div>
        </div>
      </div>
    </section>
  </main>

  <script type="module" src="app.js"></script>
</body>
</html>
